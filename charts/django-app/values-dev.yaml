# Development environment values
replicaCount: 1

image:
  repository: 625041985844.dkr.ecr.us-east-1.amazonaws.com/es-ecr-dev
  pullPolicy: Always
  tag: "dev-latest"

service:
  type: NodePort
  port: 8000

ingress:
  enabled: true
  className: "alb"
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
  hosts:
    - host: dev.django-app.example.com
      paths:
        - path: /
          pathType: Prefix

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

autoscaling:
  enabled: false

configMap:
  data:
    DJANGO_SETTINGS_MODULE: django_app.settings
    DEBUG: "True"
    ENVIRONMENT: dev
    ALLOWED_HOSTS: "dev.django-app.example.com,localhost"

env:
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: django-db-secret
        key: database-url

nginx:
  enabled: true
  image:
    repository: nginx
    tag: "1.25-alpine"
  config: |
    server {
      listen 80;
      server_name dev.django-app.example.com;
      
      location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      }
      
      location /static/ {
        alias /app/staticfiles/;
      }
    }

